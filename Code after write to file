import time
import board
import adafruit_dht
from datetime import datetime
import RPi.GPIO as GPIO

sensor = adafruit_dht.DHT11(board.D16)

print("time, celcius, farenheit")

def to_farenheit(c):
    f = (c*(9/5)) +32
    return f

while True:
    try:
        celcius=sensor.temperature
        farenheit = int(to_farenheit(celcius))
        current_time=datetime.now()
        with open ("temperature.csv", "a") as f:
            f.write("{0}, {1:0.1f},{2:0.1f}".format(current_time.strftime("%H:%M:%S"), celcius, farenheit))
        print ("{0}, {1:0.1f},{2:0.1f}".format(current_time.strftime("%H:%M:%S"), celcius, farenheit))        
        time.sleep(3.0)
    except RuntimeError as error:
        print(error.args[0])
        time.sleep(2.0)
        continue
    except KeyboardInterrupt:
        GPIO.cleanup()
    except Exception as error:
        sensor.exit()
        raise error 
